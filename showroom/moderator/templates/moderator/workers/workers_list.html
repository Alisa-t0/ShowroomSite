{% extends 'layout_m.html' %}

{% block title %}Список працівників{% endblock %}

{% block content %}
    <h2 style="text-align: center; margin-bottom: 30px;">Список працівників</h2>
    <div class="button-row">
        <form action="{% url 'export_workers' %}" method="post">
            {% csrf_token %}
            <button type="submit"  class="btn export">Експорт даних</button>
        </form>
            <form action="{% url 'import_workers' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn import">Імпорт даних</button>
        </form>
    </div>
    <form method="get">
        {% csrf_token %}
        <table>
            <tr>
                <th>
                    <input name="filter_id" type="number">
                    <a href="?sort=id&dir={% if sort_field == 'id' and direction == 'asc' %}desc{% else %}asc{% endif %}">ID</a>
                </th>
                <th>
                    <input name="filter_full_name" type="text">
                    <a href="?sort=full_name&dir={% if sort_field == 'full_name' and direction == 'asc' %}desc{% else %}asc{% endif %}">ПІБ</a>
                </th>
                <th>
                    <input name="filter_position" type="text">
                    <a href="?sort=position&dir={% if sort_field == 'position' and direction == 'asc' %}desc{% else %}asc{% endif %}">Посада</a>
                </th>
                <th>
                    <input name="filter_phone" type="text">
                    <a href="?sort=phone&dir={% if sort_field == 'phone' and direction == 'asc' %}desc{% else %}asc{% endif %}">Телефон</a>
                </th>
                <th>
                    <input name="filter_email" type="text">
                    <a href="?sort=email&dir={% if sort_field == 'email' and direction == 'asc' %}desc{% else %}asc{% endif %}">Email</a>
                </th>
                <th>
                    <input name="filter_is_active" type="boolean">
                    <a href="?sort=is_active&dir={% if sort_field == 'is_active' and direction == 'asc' %}desc{% else %}asc{% endif %}">Активний</a>
                </th>
                <th><button type="submit">ОК</button><br><br></th>
            </tr>
            {% for worker in all_workers %}
            <tr>
                <td>{{ worker.id }}</td>
                <td>{{ worker.full_name }}</td>
                <td>{{ worker.position }}</td>
                <td>{{ worker.phone }}</td>
                <td>{{ worker.email }}</td>
                <td>{% if worker.is_active %}✅{% else %}❌{% endif %}</td>
                <td><a href="{% url 'worker_details' worker.id%}">Детальніше</a></td>
            </tr>
            {% endfor %}
        </table>
        <br>
        <a href="{% url 'create_worker' %}">➕ Додати нового працівника</a>
    </form>

{% endblock %}
